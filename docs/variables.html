<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; 変数へのアクセス – 社会調査のためのR入門</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./ggplot.html" rel="next">
<link href="./data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./variables.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">変数へのアクセス</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">社会調査のためのR入門</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">本資料の説明</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Rの基礎</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pipe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">パイプ演算子</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">データの読み込み</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./variables.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">変数へのアクセス</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">ggplotによるグラフ作成</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Quarto</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tips.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">その他メモ</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">参考文献</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#変数の加工選択処理" id="toc-変数の加工選択処理" class="nav-link active" data-scroll-target="#変数の加工選択処理"><span class="header-section-number">5</span> 変数の加工，選択，処理</a>
  <ul class="collapse">
  <li><a href="#新しい変数の作成" id="toc-新しい変数の作成" class="nav-link" data-scroll-target="#新しい変数の作成"><span class="header-section-number">5.1</span> 新しい変数の作成</a></li>
  <li><a href="#変数の選択" id="toc-変数の選択" class="nav-link" data-scroll-target="#変数の選択"><span class="header-section-number">5.2</span> 変数の選択</a></li>
  <li><a href="#変数をベクトルとして取り出す" id="toc-変数をベクトルとして取り出す" class="nav-link" data-scroll-target="#変数をベクトルとして取り出す"><span class="header-section-number">5.3</span> 変数をベクトルとして取り出す</a></li>
  <li><a href="#ケースの選択" id="toc-ケースの選択" class="nav-link" data-scroll-target="#ケースの選択"><span class="header-section-number">5.4</span> ケースの選択</a></li>
  <li><a href="#変数名のクリーニング" id="toc-変数名のクリーニング" class="nav-link" data-scroll-target="#変数名のクリーニング"><span class="header-section-number">5.5</span> 変数名のクリーニング</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">変数へのアクセス</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># パッケージの呼び出し</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>               haven,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>               janitor,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>               here)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># データの読み込み</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"raw"</span>,<span class="st">"u001.dta"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code># A tibble: 1,000 × 72</code>と表示されており，1 これはデータが1000行72列から構成されていることを示している． これは社会調査の場合，1000のケース（対象者）と72の変数からなるデータであることを意味する．</p>
<p>では変数のひとつである出生年<code>ybirth</code>についてみていきたい．<code>d</code>というデータの中に，<code>ybirth</code>という変数はあるが，<code>ybirth</code>とそのまま入力しても<code>object 'ybirth' not found</code>といったエラーがでてくる．</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ybirth</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>これは<code>ybirth</code>という変数は<code>d</code>というデータの中にあるからである． データの中の変数にアクセスするためには<code>データ名$変数名</code>のようにする．</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>ybirth</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [1] 1976 1972 1975 1974 1978 1984 1976 1975 1985 1972 1974 1973 1984 1972
  [15] 1985 1982 1984 1980 1972 1978 1982 1978 1979 1975 1973 1975 1977 1973
  [29] 1983 1976 1983 1977 1978 1978 1975 1986 1986 1975 1980 1981 1977 1984
  [43] 1982 1976 1975 1978 1977 1979 1986 1984 1972 1983 1976 1974 1974 1985
  [57] 1979 1986 1981 1986 1983 1980 1983 1981 1976 1978 1974 1977 1986 1985
  [71] 1985 1977 1974 1976 1983 1985 1973 1986 1973 1982 1980 1973 1983 1980
  [85] 1983 1979 1974 1972 1979 1985 1976 1973 1985 1985 1973 1978 1975 1983
  [99] 1980 1981 1979 1981 1982 1972 1980 1973 1976 1980 1984 1985 1979 1986
 [113] 1975 1986 1983 1974 1979 1972 1981 1974 1973 1980 1980 1981 1973 1972
 [127] 1980 1978 1980 1972 1984 1972 1982 1978 1977 1972 1984 1985 1983 1974
 [141] 1979 1984 1974 1983 1976 1976 1977 1984 1974 1976 1972 1986 1980 1981
 [155] 1975 1973 1986 1975 1981 1985 1983 1984 1983 1974 1980 1981 1976 1977
 [169] 1973 1974 1982 1973 1972 1983 1978 1974 1985 1976 1977 1983 1977 1973
 [183] 1982 1972 1983 1978 1972 1975 1974 1985 1974 1981 1974 1974 1986 1980
 [197] 1974 1977 1973 1979 1986 1979 1977 1976 1975 1985 1978 1975 1973 1978
 [211] 1976 1984 1974 1977 1973 1980 1976 1981 1977 1986 1981 1986 1981 1978
 [225] 1979 1972 1984 1973 1977 1981 1979 1979 1984 1984 1973 1973 1977 1973
 [239] 1972 1978 1977 1981 1984 1981 1972 1981 1976 1977 1985 1986 1983 1981
 [253] 1985 1973 1976 1978 1977 1981 1973 1981 1978 1976 1972 1973 1981 1972
 [267] 1980 1975 1976 1973 1983 1974 1973 1985 1980 1976 1983 1983 1984 1985
 [281] 1975 1983 1981 1972 1986 1984 1972 1972 1984 1981 1974 1984 1979 1974
 [295] 1984 1972 1974 1978 1985 1972 1986 1976 1973 1977 1975 1983 1978 1976
 [309] 1978 1976 1979 1976 1976 1973 1982 1982 1973 1986 1974 1986 1975 1976
 [323] 1976 1979 1981 1981 1977 1985 1976 1972 1975 1976 1980 1981 1979 1973
 [337] 1978 1974 1975 1984 1976 1973 1981 1981 1979 1973 1981 1978 1975 1977
 [351] 1976 1975 1976 1986 1986 1986 1979 1985 1978 1974 1980 1978 1976 1975
 [365] 1984 1983 1979 1985 1985 1984 1981 1976 1974 1981 1983 1973 1977 1975
 [379] 1977 1986 1973 1976 1972 1981 1985 1985 1981 1981 1980 1984 1975 1974
 [393] 1986 1979 1974 1977 1975 1983 1977 1982 1975 1986 1983 1975 1986 1981
 [407] 1974 1983 1972 1985 1980 1979 1976 1974 1977 1972 1985 1975 1979 1980
 [421] 1986 1978 1976 1980 1974 1985 1976 1977 1977 1980 1977 1984 1981 1983
 [435] 1982 1983 1981 1974 1980 1983 1975 1983 1972 1985 1980 1981 1972 1985
 [449] 1981 1977 1976 1976 1984 1976 1972 1983 1986 1983 1976 1981 1981 1983
 [463] 1976 1975 1982 1977 1975 1977 1983 1979 1974 1975 1984 1974 1972 1978
 [477] 1972 1984 1981 1972 1981 1974 1985 1972 1977 1972 1981 1977 1981 1977
 [491] 1975 1973 1978 1972 1973 1986 1985 1985 1972 1976 1979 1972 1972 1973
 [505] 1975 1973 1986 1980 1975 1975 1982 1986 1985 1979 1977 1981 1977 1978
 [519] 1980 1983 1983 1972 1984 1972 1983 1984 1979 1976 1986 1984 1978 1977
 [533] 1983 1974 1977 1973 1980 1980 1973 1982 1975 1974 1973 1977 1981 1972
 [547] 1974 1973 1983 1980 1977 1980 1973 1978 1984 1983 1986 1974 1985 1977
 [561] 1980 1983 1977 1984 1975 1973 1984 1977 1983 1982 1985 1980 1973 1977
 [575] 1973 1973 1979 1975 1982 1985 1982 1982 1977 1984 1974 1982 1978 1974
 [589] 1978 1986 1981 1978 1975 1975 1972 1973 1974 1986 1972 1985 1973 1975
 [603] 1981 1979 1975 1977 1976 1986 1977 1985 1974 1984 1976 1986 1985 1972
 [617] 1973 1972 1985 1976 1981 1986 1978 1974 1977 1980 1978 1977 1980 1982
 [631] 1974 1973 1979 1982 1982 1984 1973 1983 1982 1972 1975 1974 1975 1979
 [645] 1974 1986 1986 1972 1984 1972 1980 1973 1985 1986 1972 1984 1974 1976
 [659] 1984 1972 1985 1977 1976 1976 1982 1986 1985 1984 1986 1984 1985 1972
 [673] 1979 1982 1982 1978 1973 1984 1976 1974 1976 1984 1975 1972 1975 1972
 [687] 1978 1981 1976 1979 1978 1975 1976 1976 1985 1984 1974 1973 1977 1985
 [701] 1979 1972 1975 1976 1974 1973 1976 1972 1975 1975 1975 1979 1975 1983
 [715] 1977 1979 1977 1981 1983 1986 1986 1982 1983 1973 1975 1977 1976 1983
 [729] 1972 1974 1985 1977 1975 1976 1977 1977 1977 1984 1981 1984 1977 1973
 [743] 1976 1984 1972 1982 1980 1977 1981 1986 1974 1984 1982 1973 1978 1978
 [757] 1983 1981 1974 1982 1974 1972 1975 1981 1979 1979 1979 1975 1975 1981
 [771] 1974 1979 1974 1985 1974 1984 1981 1980 1976 1979 1974 1974 1983 1982
 [785] 1985 1973 1974 1975 1981 1975 1974 1983 1974 1972 1974 1973 1972 1985
 [799] 1974 1973 1974 1985 1973 1978 1986 1977 1979 1975 1973 1973 1980 1975
 [813] 1976 1976 1975 1972 1977 1972 1977 1986 1978 1973 1985 1979 1974 1986
 [827] 1983 1982 1982 1986 1973 1976 1981 1981 1978 1978 1975 1986 1981 1972
 [841] 1976 1978 1986 1983 1973 1973 1976 1982 1982 1977 1977 1978 1984 1977
 [855] 1975 1979 1984 1975 1974 1984 1984 1978 1981 1979 1977 1985 1977 1976
 [869] 1976 1974 1977 1985 1986 1973 1979 1979 1981 1976 1982 1974 1978 1984
 [883] 1979 1980 1977 1985 1984 1979 1983 1983 1981 1981 1982 1974 1986 1986
 [897] 1984 1982 1980 1986 1973 1974 1974 1974 1985 1984 1976 1976 1979 1977
 [911] 1984 1982 1982 1981 1983 1980 1978 1979 1986 1983 1984 1973 1984 1986
 [925] 1976 1975 1978 1980 1986 1986 1977 1977 1977 1977 1973 1984 1973 1986
 [939] 1972 1986 1974 1980 1983 1978 1982 1983 1985 1984 1973 1977 1977 1981
 [953] 1978 1986 1980 1986 1986 1982 1984 1983 1983 1985 1980 1975 1985 1986
 [967] 1983 1974 1984 1973 1983 1975 1979 1986 1977 1983 1977 1973 1974 1977
 [981] 1985 1986 1977 1983 1984 1985 1973 1972 1979 1982 1974 1973 1974 1985
 [995] 1973 1986 1981 1972 1976 1983
attr(,"label")
[1] "問1(2)_生年"
attr(,"format.stata")
[1] "%12.0g"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 度数を表示</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> <span class="fu">count</span>(ybirth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 2
   ybirth     n
    &lt;dbl&gt; &lt;int&gt;
 1   1972    70
 2   1973    81
 3   1974    82
 4   1975    70
 5   1976    76
 6   1977    84
 7   1978    53
 8   1979    54
 9   1980    48
10   1981    70
11   1982    44
12   1983    67
13   1984    67
14   1985    64
15   1986    70</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 度数と割合を表示</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> <span class="fu">tabyl</span>(ybirth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> ybirth  n percent
   1972 70   0.070
   1973 81   0.081
   1974 82   0.082
   1975 70   0.070
   1976 76   0.076
   1977 84   0.084
   1978 53   0.053
   1979 54   0.054
   1980 48   0.048
   1981 70   0.070
   1982 44   0.044
   1983 67   0.067
   1984 67   0.067
   1985 64   0.064
   1986 70   0.070</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 度数と割合を表示し，tbl形式に</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> <span class="fu">tabyl</span>(ybirth) <span class="sc">|&gt;</span> <span class="fu">tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 3
   ybirth     n percent
    &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
 1   1972    70   0.07 
 2   1973    81   0.081
 3   1974    82   0.082
 4   1975    70   0.07 
 5   1976    76   0.076
 6   1977    84   0.084
 7   1978    53   0.053
 8   1979    54   0.054
 9   1980    48   0.048
10   1981    70   0.07 
11   1982    44   0.044
12   1983    67   0.067
13   1984    67   0.067
14   1985    64   0.064
15   1986    70   0.07 </code></pre>
</div>
</div>
<section id="変数の加工選択処理" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> 変数の加工，選択，処理</h1>
<p><code>dplyr</code>パッケージの4つの関数を使用方法をマスターしよう．</p>
<ul>
<li><code>count</code>関数</li>
<li><code>summarise</code>関数</li>
<li><code>mutate</code>関数</li>
<li><code>filter</code>関数</li>
<li><code>select</code>関数</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="新しい変数の作成" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="新しい変数の作成"><span class="header-section-number">5.1</span> 新しい変数の作成</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">age_2006 =</span> <span class="dv">2006</span> <span class="sc">-</span> ybirth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 73
   caseid sex        ybirth mbirth ZQ03        JC_1     JC_41    ZQ08A   ZQ08B  
    &lt;dbl&gt; &lt;dbl+lbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl+lbl&gt;   &lt;dbl+lb&gt; &lt;dbl+lb&gt; &lt;dbl+l&gt; &lt;dbl+l&gt;
 1  10001 1 [male]     1976     10 1 [してい…  2 [正… 12     … 4 [週… 1 [毎…
 2  10002 1 [male]     1972      1 1 [してい…  2 [正…  9     … 6 [ほ… 2 [週…
 3  10003 1 [male]     1975      4 1 [してい…  2 [正…  9     … 6 [ほ… 6 [ほ…
 4  10004 2 [female]   1974     11 1 [してい…  2 [正…  7     … 6 [ほ… 1 [毎…
 5  10005 1 [male]     1978      1 2 [してい… 10 [無… 88 [非… 6 [ほ… 2 [週…
 6  10006 1 [male]     1984      2 2 [してい… 10 [無… 88 [非… 6 [ほ… 1 [毎…
 7  10007 2 [female]   1976      6 1 [してい…  2 [正…  8     … 6 [ほ… 4 [週…
 8  10008 1 [male]     1975      4 1 [してい…  2 [正…  9     … 5 [月… 2 [週…
 9  10009 2 [female]   1985      9 1 [してい…  3 [パ…  5     … 1 [毎… 1 [毎…
10  10010 1 [male]     1972      2 1 [してい…  2 [正…  8     … 6 [ほ… 1 [毎…
# ℹ 990 more rows
# ℹ 64 more variables: ZQ08C &lt;dbl+lbl&gt;, ZQ08D &lt;dbl+lbl&gt;, ZQ08E &lt;dbl+lbl&gt;,
#   ZQ08F &lt;dbl+lbl&gt;, ZQ08G &lt;dbl+lbl&gt;, ZQ08H &lt;dbl+lbl&gt;, ZQ11_A &lt;dbl+lbl&gt;,
#   ZQ11_B &lt;dbl+lbl&gt;, ZQ11_C &lt;dbl+lbl&gt;, ZQ11_D &lt;dbl+lbl&gt;, ZQ11_E &lt;dbl+lbl&gt;,
#   ZQ11_F &lt;dbl+lbl&gt;, ZQ11_G &lt;dbl+lbl&gt;, ZQ11_H &lt;dbl+lbl&gt;, ZQ11_I &lt;dbl+lbl&gt;,
#   ZQ11_J &lt;dbl+lbl&gt;, ZQ11_K &lt;dbl+lbl&gt;, ZQ11_L &lt;dbl+lbl&gt;, ZQ11_M &lt;dbl+lbl&gt;,
#   ZQ11_N &lt;dbl+lbl&gt;, ZQ11_O &lt;dbl+lbl&gt;, ZQ12 &lt;dbl+lbl&gt;, ZQ14_1A &lt;dbl+lbl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">age_2006 =</span> <span class="dv">2006</span> <span class="sc">-</span> ybirth, <span class="at">.before =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 73
   age_2006 caseid sex        ybirth mbirth ZQ03       JC_1     JC_41    ZQ08A  
      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl+lbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl+lbl&gt;  &lt;dbl+lb&gt; &lt;dbl+lb&gt; &lt;dbl+l&gt;
 1       30  10001 1 [male]     1976     10 1 [してい…  2 [正… 12     … 4 [週…
 2       34  10002 1 [male]     1972      1 1 [してい…  2 [正…  9     … 6 [ほ…
 3       31  10003 1 [male]     1975      4 1 [してい…  2 [正…  9     … 6 [ほ…
 4       32  10004 2 [female]   1974     11 1 [してい…  2 [正…  7     … 6 [ほ…
 5       28  10005 1 [male]     1978      1 2 [してい… 10 [無… 88 [非… 6 [ほ…
 6       22  10006 1 [male]     1984      2 2 [してい… 10 [無… 88 [非… 6 [ほ…
 7       30  10007 2 [female]   1976      6 1 [してい…  2 [正…  8     … 6 [ほ…
 8       31  10008 1 [male]     1975      4 1 [してい…  2 [正…  9     … 5 [月…
 9       21  10009 2 [female]   1985      9 1 [してい…  3 [パ…  5     … 1 [毎…
10       34  10010 1 [male]     1972      2 1 [してい…  2 [正…  8     … 6 [ほ…
# ℹ 990 more rows
# ℹ 64 more variables: ZQ08B &lt;dbl+lbl&gt;, ZQ08C &lt;dbl+lbl&gt;, ZQ08D &lt;dbl+lbl&gt;,
#   ZQ08E &lt;dbl+lbl&gt;, ZQ08F &lt;dbl+lbl&gt;, ZQ08G &lt;dbl+lbl&gt;, ZQ08H &lt;dbl+lbl&gt;,
#   ZQ11_A &lt;dbl+lbl&gt;, ZQ11_B &lt;dbl+lbl&gt;, ZQ11_C &lt;dbl+lbl&gt;, ZQ11_D &lt;dbl+lbl&gt;,
#   ZQ11_E &lt;dbl+lbl&gt;, ZQ11_F &lt;dbl+lbl&gt;, ZQ11_G &lt;dbl+lbl&gt;, ZQ11_H &lt;dbl+lbl&gt;,
#   ZQ11_I &lt;dbl+lbl&gt;, ZQ11_J &lt;dbl+lbl&gt;, ZQ11_K &lt;dbl+lbl&gt;, ZQ11_L &lt;dbl+lbl&gt;,
#   ZQ11_M &lt;dbl+lbl&gt;, ZQ11_N &lt;dbl+lbl&gt;, ZQ11_O &lt;dbl+lbl&gt;, ZQ12 &lt;dbl+lbl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">age_2006 =</span> <span class="dv">2006</span> <span class="sc">-</span> ybirth)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> <span class="fu">count</span>(ybirth, age_2006)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 3
   ybirth age_2006     n
    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
 1   1972       34    70
 2   1973       33    81
 3   1974       32    82
 4   1975       31    70
 5   1976       30    76
 6   1977       29    84
 7   1978       28    53
 8   1979       27    54
 9   1980       26    48
10   1981       25    70
11   1982       24    44
12   1983       23    67
13   1984       22    67
14   1985       21    64
15   1986       20    70</code></pre>
</div>
</div>
</section>
<section id="変数の選択" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="変数の選択"><span class="header-section-number">5.2</span> 変数の選択</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> <span class="fu">select</span>(ybirth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 1
   ybirth
    &lt;dbl&gt;
 1   1976
 2   1972
 3   1975
 4   1974
 5   1978
 6   1984
 7   1976
 8   1975
 9   1985
10   1972
# ℹ 990 more rows</code></pre>
</div>
</div>
</section>
<section id="変数をベクトルとして取り出す" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="変数をベクトルとして取り出す"><span class="header-section-number">5.3</span> 変数をベクトルとして取り出す</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> <span class="fu">pull</span>(ybirth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [1] 1976 1972 1975 1974 1978 1984 1976 1975 1985 1972 1974 1973 1984 1972
  [15] 1985 1982 1984 1980 1972 1978 1982 1978 1979 1975 1973 1975 1977 1973
  [29] 1983 1976 1983 1977 1978 1978 1975 1986 1986 1975 1980 1981 1977 1984
  [43] 1982 1976 1975 1978 1977 1979 1986 1984 1972 1983 1976 1974 1974 1985
  [57] 1979 1986 1981 1986 1983 1980 1983 1981 1976 1978 1974 1977 1986 1985
  [71] 1985 1977 1974 1976 1983 1985 1973 1986 1973 1982 1980 1973 1983 1980
  [85] 1983 1979 1974 1972 1979 1985 1976 1973 1985 1985 1973 1978 1975 1983
  [99] 1980 1981 1979 1981 1982 1972 1980 1973 1976 1980 1984 1985 1979 1986
 [113] 1975 1986 1983 1974 1979 1972 1981 1974 1973 1980 1980 1981 1973 1972
 [127] 1980 1978 1980 1972 1984 1972 1982 1978 1977 1972 1984 1985 1983 1974
 [141] 1979 1984 1974 1983 1976 1976 1977 1984 1974 1976 1972 1986 1980 1981
 [155] 1975 1973 1986 1975 1981 1985 1983 1984 1983 1974 1980 1981 1976 1977
 [169] 1973 1974 1982 1973 1972 1983 1978 1974 1985 1976 1977 1983 1977 1973
 [183] 1982 1972 1983 1978 1972 1975 1974 1985 1974 1981 1974 1974 1986 1980
 [197] 1974 1977 1973 1979 1986 1979 1977 1976 1975 1985 1978 1975 1973 1978
 [211] 1976 1984 1974 1977 1973 1980 1976 1981 1977 1986 1981 1986 1981 1978
 [225] 1979 1972 1984 1973 1977 1981 1979 1979 1984 1984 1973 1973 1977 1973
 [239] 1972 1978 1977 1981 1984 1981 1972 1981 1976 1977 1985 1986 1983 1981
 [253] 1985 1973 1976 1978 1977 1981 1973 1981 1978 1976 1972 1973 1981 1972
 [267] 1980 1975 1976 1973 1983 1974 1973 1985 1980 1976 1983 1983 1984 1985
 [281] 1975 1983 1981 1972 1986 1984 1972 1972 1984 1981 1974 1984 1979 1974
 [295] 1984 1972 1974 1978 1985 1972 1986 1976 1973 1977 1975 1983 1978 1976
 [309] 1978 1976 1979 1976 1976 1973 1982 1982 1973 1986 1974 1986 1975 1976
 [323] 1976 1979 1981 1981 1977 1985 1976 1972 1975 1976 1980 1981 1979 1973
 [337] 1978 1974 1975 1984 1976 1973 1981 1981 1979 1973 1981 1978 1975 1977
 [351] 1976 1975 1976 1986 1986 1986 1979 1985 1978 1974 1980 1978 1976 1975
 [365] 1984 1983 1979 1985 1985 1984 1981 1976 1974 1981 1983 1973 1977 1975
 [379] 1977 1986 1973 1976 1972 1981 1985 1985 1981 1981 1980 1984 1975 1974
 [393] 1986 1979 1974 1977 1975 1983 1977 1982 1975 1986 1983 1975 1986 1981
 [407] 1974 1983 1972 1985 1980 1979 1976 1974 1977 1972 1985 1975 1979 1980
 [421] 1986 1978 1976 1980 1974 1985 1976 1977 1977 1980 1977 1984 1981 1983
 [435] 1982 1983 1981 1974 1980 1983 1975 1983 1972 1985 1980 1981 1972 1985
 [449] 1981 1977 1976 1976 1984 1976 1972 1983 1986 1983 1976 1981 1981 1983
 [463] 1976 1975 1982 1977 1975 1977 1983 1979 1974 1975 1984 1974 1972 1978
 [477] 1972 1984 1981 1972 1981 1974 1985 1972 1977 1972 1981 1977 1981 1977
 [491] 1975 1973 1978 1972 1973 1986 1985 1985 1972 1976 1979 1972 1972 1973
 [505] 1975 1973 1986 1980 1975 1975 1982 1986 1985 1979 1977 1981 1977 1978
 [519] 1980 1983 1983 1972 1984 1972 1983 1984 1979 1976 1986 1984 1978 1977
 [533] 1983 1974 1977 1973 1980 1980 1973 1982 1975 1974 1973 1977 1981 1972
 [547] 1974 1973 1983 1980 1977 1980 1973 1978 1984 1983 1986 1974 1985 1977
 [561] 1980 1983 1977 1984 1975 1973 1984 1977 1983 1982 1985 1980 1973 1977
 [575] 1973 1973 1979 1975 1982 1985 1982 1982 1977 1984 1974 1982 1978 1974
 [589] 1978 1986 1981 1978 1975 1975 1972 1973 1974 1986 1972 1985 1973 1975
 [603] 1981 1979 1975 1977 1976 1986 1977 1985 1974 1984 1976 1986 1985 1972
 [617] 1973 1972 1985 1976 1981 1986 1978 1974 1977 1980 1978 1977 1980 1982
 [631] 1974 1973 1979 1982 1982 1984 1973 1983 1982 1972 1975 1974 1975 1979
 [645] 1974 1986 1986 1972 1984 1972 1980 1973 1985 1986 1972 1984 1974 1976
 [659] 1984 1972 1985 1977 1976 1976 1982 1986 1985 1984 1986 1984 1985 1972
 [673] 1979 1982 1982 1978 1973 1984 1976 1974 1976 1984 1975 1972 1975 1972
 [687] 1978 1981 1976 1979 1978 1975 1976 1976 1985 1984 1974 1973 1977 1985
 [701] 1979 1972 1975 1976 1974 1973 1976 1972 1975 1975 1975 1979 1975 1983
 [715] 1977 1979 1977 1981 1983 1986 1986 1982 1983 1973 1975 1977 1976 1983
 [729] 1972 1974 1985 1977 1975 1976 1977 1977 1977 1984 1981 1984 1977 1973
 [743] 1976 1984 1972 1982 1980 1977 1981 1986 1974 1984 1982 1973 1978 1978
 [757] 1983 1981 1974 1982 1974 1972 1975 1981 1979 1979 1979 1975 1975 1981
 [771] 1974 1979 1974 1985 1974 1984 1981 1980 1976 1979 1974 1974 1983 1982
 [785] 1985 1973 1974 1975 1981 1975 1974 1983 1974 1972 1974 1973 1972 1985
 [799] 1974 1973 1974 1985 1973 1978 1986 1977 1979 1975 1973 1973 1980 1975
 [813] 1976 1976 1975 1972 1977 1972 1977 1986 1978 1973 1985 1979 1974 1986
 [827] 1983 1982 1982 1986 1973 1976 1981 1981 1978 1978 1975 1986 1981 1972
 [841] 1976 1978 1986 1983 1973 1973 1976 1982 1982 1977 1977 1978 1984 1977
 [855] 1975 1979 1984 1975 1974 1984 1984 1978 1981 1979 1977 1985 1977 1976
 [869] 1976 1974 1977 1985 1986 1973 1979 1979 1981 1976 1982 1974 1978 1984
 [883] 1979 1980 1977 1985 1984 1979 1983 1983 1981 1981 1982 1974 1986 1986
 [897] 1984 1982 1980 1986 1973 1974 1974 1974 1985 1984 1976 1976 1979 1977
 [911] 1984 1982 1982 1981 1983 1980 1978 1979 1986 1983 1984 1973 1984 1986
 [925] 1976 1975 1978 1980 1986 1986 1977 1977 1977 1977 1973 1984 1973 1986
 [939] 1972 1986 1974 1980 1983 1978 1982 1983 1985 1984 1973 1977 1977 1981
 [953] 1978 1986 1980 1986 1986 1982 1984 1983 1983 1985 1980 1975 1985 1986
 [967] 1983 1974 1984 1973 1983 1975 1979 1986 1977 1983 1977 1973 1974 1977
 [981] 1985 1986 1977 1983 1984 1985 1973 1972 1979 1982 1974 1973 1974 1985
 [995] 1973 1986 1981 1972 1976 1983
attr(,"label")
[1] "問1(2)_生年"
attr(,"format.stata")
[1] "%12.0g"</code></pre>
</div>
</div>
</section>
<section id="ケースの選択" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="ケースの選択"><span class="header-section-number">5.4</span> ケースの選択</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> <span class="fu">filter</span>(ybirth <span class="sc">==</span> <span class="dv">1981</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 70 × 73
   caseid sex        ybirth mbirth ZQ03        JC_1     JC_41    ZQ08A   ZQ08B  
    &lt;dbl&gt; &lt;dbl+lbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl+lbl&gt;   &lt;dbl+lb&gt; &lt;dbl+lb&gt; &lt;dbl+l&gt; &lt;dbl+l&gt;
 1  10040 1 [male]     1981      9 1 [してい…  2 [正… 12     … 4 [週… 1 [毎…
 2  10059 1 [male]     1981      1 1 [してい…  2 [正… 10     … 5 [月… 1 [毎…
 3  10064 1 [male]     1981      2 1 [してい… 12 [学…  1     … 5 [月… 1 [毎…
 4  10100 2 [female]   1981     10 2 [してい… 10 [無… 88 [非… 6 [ほ… 1 [毎…
 5  10102 2 [female]   1981      6 1 [してい…  3 [パ…  8     … 6 [ほ… 3 [週…
 6  10119 2 [female]   1981      6 1 [してい…  3 [パ…  8     … 6 [ほ… 1 [毎…
 7  10124 1 [male]     1981      7 2 [してい… 11 [学… 88 [非… 6 [ほ… 1 [毎…
 8  10154 2 [female]   1981     11 1 [してい…  4 [派…  7     … 6 [ほ… 9 [無…
 9  10159 2 [female]   1981      3 1 [してい…  2 [正…  8     … 6 [ほ… 1 [毎…
10  10166 2 [female]   1981      6 1 [してい…  2 [正… 10     … 6 [ほ… 1 [毎…
# ℹ 60 more rows
# ℹ 64 more variables: ZQ08C &lt;dbl+lbl&gt;, ZQ08D &lt;dbl+lbl&gt;, ZQ08E &lt;dbl+lbl&gt;,
#   ZQ08F &lt;dbl+lbl&gt;, ZQ08G &lt;dbl+lbl&gt;, ZQ08H &lt;dbl+lbl&gt;, ZQ11_A &lt;dbl+lbl&gt;,
#   ZQ11_B &lt;dbl+lbl&gt;, ZQ11_C &lt;dbl+lbl&gt;, ZQ11_D &lt;dbl+lbl&gt;, ZQ11_E &lt;dbl+lbl&gt;,
#   ZQ11_F &lt;dbl+lbl&gt;, ZQ11_G &lt;dbl+lbl&gt;, ZQ11_H &lt;dbl+lbl&gt;, ZQ11_I &lt;dbl+lbl&gt;,
#   ZQ11_J &lt;dbl+lbl&gt;, ZQ11_K &lt;dbl+lbl&gt;, ZQ11_L &lt;dbl+lbl&gt;, ZQ11_M &lt;dbl+lbl&gt;,
#   ZQ11_N &lt;dbl+lbl&gt;, ZQ11_O &lt;dbl+lbl&gt;, ZQ12 &lt;dbl+lbl&gt;, ZQ14_1A &lt;dbl+lbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="変数名のクリーニング" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="変数名のクリーニング"><span class="header-section-number">5.5</span> 変数名のクリーニング</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#janitor::clean_names()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./data.html" class="pagination-link" aria-label="データの読み込み">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">データの読み込み</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./ggplot.html" class="pagination-link" aria-label="ggplotによるグラフ作成">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">ggplotによるグラフ作成</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>