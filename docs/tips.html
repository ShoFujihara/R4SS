<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>7&nbsp; その他メモ – 社会調査のためのR入門</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./quarto.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./tips.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">その他メモ</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">社会調査のためのR入門</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">本資料の説明</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Rの基礎</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pipe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">パイプ演算子</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">データの読み込み</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">変数へのアクセス</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">ggplotによるグラフ作成</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Quarto</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tips.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">その他メモ</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">参考文献</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#積分" id="toc-積分" class="nav-link active" data-scroll-target="#積分"><span class="header-section-number">7.1</span> 積分</a></li>
  <li><a href="#文字列の処理" id="toc-文字列の処理" class="nav-link" data-scroll-target="#文字列の処理"><span class="header-section-number">7.2</span> 文字列の処理</a></li>
  <li><a href="#正規表現regular-expression" id="toc-正規表現regular-expression" class="nav-link" data-scroll-target="#正規表現regular-expression"><span class="header-section-number">7.3</span> 正規表現（regular expression）</a></li>
  <li><a href="#any_of-all_of" id="toc-any_of-all_of" class="nav-link" data-scroll-target="#any_of-all_of"><span class="header-section-number">7.4</span> any_of, all_of</a></li>
  <li><a href="#map" id="toc-map" class="nav-link" data-scroll-target="#map"><span class="header-section-number">7.5</span> map</a></li>
  <li><a href="#部分一致" id="toc-部分一致" class="nav-link" data-scroll-target="#部分一致"><span class="header-section-number">7.6</span> 部分一致</a></li>
  <li><a href="#因子" id="toc-因子" class="nav-link" data-scroll-target="#因子"><span class="header-section-number">7.7</span> 因子</a></li>
  <li><a href="#集計データを個票データに変換する" id="toc-集計データを個票データに変換する" class="nav-link" data-scroll-target="#集計データを個票データに変換する"><span class="header-section-number">7.8</span> 集計データを個票データに変換する</a></li>
  <li><a href="#関数の中身を確認する" id="toc-関数の中身を確認する" class="nav-link" data-scroll-target="#関数の中身を確認する"><span class="header-section-number">7.9</span> 関数の中身を確認する</a></li>
  <li><a href="#unnameを使う" id="toc-unnameを使う" class="nav-link" data-scroll-target="#unnameを使う"><span class="header-section-number">7.10</span> unnameを使う</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">その他メモ</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>便利だが普段はあまりつかわないため忘れがちな点についてメモしておく． 本テキストのどこかで扱う内容もメモする．</p>
<section id="積分" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="積分"><span class="header-section-number">7.1</span> 積分</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">integrate</span>(<span class="cf">function</span>(x) <span class="fu">dnorm</span>(x, <span class="dv">0</span>, <span class="dv">1</span>), <span class="at">lower =</span> <span class="dv">0</span>, <span class="at">upper =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.5 with absolute error &lt; 4.7e-05</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">integrate</span>(<span class="cf">function</span>(x) <span class="fu">dnorm</span>(x, <span class="dv">0</span>, <span class="dv">1</span>), <span class="at">lower =</span> <span class="sc">-</span><span class="fl">1.645</span>, <span class="at">upper =</span> <span class="fl">1.645</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.9000302 with absolute error &lt; 7.4e-14</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">integrate</span>(<span class="cf">function</span>(x) <span class="fu">dnorm</span>(x, <span class="dv">0</span>, <span class="dv">1</span>), <span class="at">lower =</span> <span class="sc">-</span><span class="fl">1.96</span>, <span class="at">upper =</span> <span class="fl">1.96</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.9500042 with absolute error &lt; 1e-11</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">integrate</span>(<span class="cf">function</span>(x) <span class="fu">dchisq</span>(x, <span class="at">df =</span> <span class="dv">5</span>), <span class="at">lower =</span> <span class="dv">0</span>, <span class="at">upper =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.5841198 with absolute error &lt; 7.7e-05</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">integrate</span>(<span class="cf">function</span>(x) <span class="fu">dchisq</span>(x, <span class="at">df =</span> <span class="dv">100</span>), <span class="at">lower =</span> <span class="dv">0</span>, <span class="at">upper =</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.5188083 with absolute error &lt; 1.2e-11</code></pre>
</div>
</div>
</section>
<section id="文字列の処理" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="文字列の処理"><span class="header-section-number">7.2</span> 文字列の処理</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>fruit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "apple"             "apricot"           "avocado"          
 [4] "banana"            "bell pepper"       "bilberry"         
 [7] "blackberry"        "blackcurrant"      "blood orange"     
[10] "blueberry"         "boysenberry"       "breadfruit"       
[13] "canary melon"      "cantaloupe"        "cherimoya"        
[16] "cherry"            "chili pepper"      "clementine"       
[19] "cloudberry"        "coconut"           "cranberry"        
[22] "cucumber"          "currant"           "damson"           
[25] "date"              "dragonfruit"       "durian"           
[28] "eggplant"          "elderberry"        "feijoa"           
[31] "fig"               "goji berry"        "gooseberry"       
[34] "grape"             "grapefruit"        "guava"            
[37] "honeydew"          "huckleberry"       "jackfruit"        
[40] "jambul"            "jujube"            "kiwi fruit"       
[43] "kumquat"           "lemon"             "lime"             
[46] "loquat"            "lychee"            "mandarine"        
[49] "mango"             "mulberry"          "nectarine"        
[52] "nut"               "olive"             "orange"           
[55] "pamelo"            "papaya"            "passionfruit"     
[58] "peach"             "pear"              "persimmon"        
[61] "physalis"          "pineapple"         "plum"             
[64] "pomegranate"       "pomelo"            "purple mangosteen"
[67] "quince"            "raisin"            "rambutan"         
[70] "raspberry"         "redcurrant"        "rock melon"       
[73] "salal berry"       "satsuma"           "star fruit"       
[76] "strawberry"        "tamarillo"         "tangerine"        
[79] "ugli fruit"        "watermelon"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 長さ</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(fruit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  5  7  7  6 11  8 10 12 12  9 11 10 12 10  9  6 12 10 10  7  9  8  7  6  4
[26] 11  6  8 10  6  3 10 10  5 10  5  8 11  9  6  6 10  7  5  4  6  6  9  5  8
[51]  9  3  5  6  6  6 12  5  4  9  8  9  4 11  6 17  6  6  8  9 10 10 11  7 10
[76] 10  9  9 10 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># くっつける</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"fruit_"</span>, fruit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "fruit_apple"             "fruit_apricot"          
 [3] "fruit_avocado"           "fruit_banana"           
 [5] "fruit_bell pepper"       "fruit_bilberry"         
 [7] "fruit_blackberry"        "fruit_blackcurrant"     
 [9] "fruit_blood orange"      "fruit_blueberry"        
[11] "fruit_boysenberry"       "fruit_breadfruit"       
[13] "fruit_canary melon"      "fruit_cantaloupe"       
[15] "fruit_cherimoya"         "fruit_cherry"           
[17] "fruit_chili pepper"      "fruit_clementine"       
[19] "fruit_cloudberry"        "fruit_coconut"          
[21] "fruit_cranberry"         "fruit_cucumber"         
[23] "fruit_currant"           "fruit_damson"           
[25] "fruit_date"              "fruit_dragonfruit"      
[27] "fruit_durian"            "fruit_eggplant"         
[29] "fruit_elderberry"        "fruit_feijoa"           
[31] "fruit_fig"               "fruit_goji berry"       
[33] "fruit_gooseberry"        "fruit_grape"            
[35] "fruit_grapefruit"        "fruit_guava"            
[37] "fruit_honeydew"          "fruit_huckleberry"      
[39] "fruit_jackfruit"         "fruit_jambul"           
[41] "fruit_jujube"            "fruit_kiwi fruit"       
[43] "fruit_kumquat"           "fruit_lemon"            
[45] "fruit_lime"              "fruit_loquat"           
[47] "fruit_lychee"            "fruit_mandarine"        
[49] "fruit_mango"             "fruit_mulberry"         
[51] "fruit_nectarine"         "fruit_nut"              
[53] "fruit_olive"             "fruit_orange"           
[55] "fruit_pamelo"            "fruit_papaya"           
[57] "fruit_passionfruit"      "fruit_peach"            
[59] "fruit_pear"              "fruit_persimmon"        
[61] "fruit_physalis"          "fruit_pineapple"        
[63] "fruit_plum"              "fruit_pomegranate"      
[65] "fruit_pomelo"            "fruit_purple mangosteen"
[67] "fruit_quince"            "fruit_raisin"           
[69] "fruit_rambutan"          "fruit_raspberry"        
[71] "fruit_redcurrant"        "fruit_rock melon"       
[73] "fruit_salal berry"       "fruit_satsuma"          
[75] "fruit_star fruit"        "fruit_strawberry"       
[77] "fruit_tamarillo"         "fruit_tangerine"        
[79] "fruit_ugli fruit"        "fruit_watermelon"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># パターンの数</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(fruit, <span class="st">"[a-b]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 2 4 1 2 3 3 2 2 2 2 2 2 1 0 0 0 1 0 2 1 1 1 1 1 1 1 1 1 0 1 1 1 1 2 0 1
[39] 1 2 1 0 1 0 0 1 0 2 1 1 1 0 0 1 1 3 1 1 1 0 1 1 0 2 0 1 0 1 3 2 1 0 3 2 1 2
[77] 2 1 0 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># パターンの発見</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(fruit, <span class="st">"[a-b]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[13]  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE
[25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
[37] FALSE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE FALSE  TRUE FALSE  TRUE
[49]  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
[61]  TRUE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE
[73]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 繰り返す</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_dup</span>(letters, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "aaaaa" "bbbbb" "ccccc" "ddddd" "eeeee" "fffff" "ggggg" "hhhhh" "iiiii"
[10] "jjjjj" "kkkkk" "lllll" "mmmmm" "nnnnn" "ooooo" "ppppp" "qqqqq" "rrrrr"
[19] "sssss" "ttttt" "uuuuu" "vvvvv" "wwwww" "xxxxx" "yyyyy" "zzzzz"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 終わる</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>fruit[<span class="fu">str_ends</span>(fruit, <span class="st">"a"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "banana"    "cherimoya" "feijoa"    "guava"     "papaya"    "satsuma"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 同じ</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_equal</span>(fruit, <span class="st">"banana"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># エスケープ</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_escape</span>(<span class="st">"^"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "\\^"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(fruit, <span class="st">"[a-c]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "a" "a" "a" "b" "b" "b" "b" "b" "b" "b" "b" "b" "c" "c" "c" "c" "c" "c" "c"
[20] "c" "c" "c" "c" "a" "a" "a" "a" "a" "b" "a" NA  "b" "b" "a" "a" "a" NA  "c"
[39] "a" "a" "b" NA  "a" NA  NA  "a" "c" "a" "a" "b" "c" NA  NA  "a" "a" "a" "a"
[58] "a" "a" NA  "a" "a" NA  "a" NA  "a" "c" "a" "a" "a" "c" "c" "a" "a" "a" "a"
[77] "a" "a" NA  "a"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(fruit, <span class="st">"b[a-n]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] NA   NA   NA   "ba" "be" "bi" "bl" "bl" "bl" "bl" "be" NA   NA   NA   NA  
[16] NA   NA   NA   "be" NA   "be" "be" NA   NA   NA   NA   NA   NA   "be" NA  
[31] NA   "be" "be" NA   NA   NA   NA   "be" NA   NA   "be" NA   NA   NA   NA  
[46] NA   NA   NA   NA   "be" NA   NA   NA   NA   NA   NA   NA   NA   NA   NA  
[61] NA   NA   NA   NA   NA   NA   NA   NA   NA   "be" NA   NA   "be" NA   NA  
[76] "be" NA   NA   NA   NA  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(fruit, <span class="st">"apple"</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1]   
 [1,] "apple"
 [2,] ""     
 [3,] ""     
 [4,] ""     
 [5,] ""     
 [6,] ""     
 [7,] ""     
 [8,] ""     
 [9,] ""     
[10,] ""     
[11,] ""     
[12,] ""     
[13,] ""     
[14,] ""     
[15,] ""     
[16,] ""     
[17,] ""     
[18,] ""     
[19,] ""     
[20,] ""     
[21,] ""     
[22,] ""     
[23,] ""     
[24,] ""     
[25,] ""     
[26,] ""     
[27,] ""     
[28,] ""     
[29,] ""     
[30,] ""     
[31,] ""     
[32,] ""     
[33,] ""     
[34,] ""     
[35,] ""     
[36,] ""     
[37,] ""     
[38,] ""     
[39,] ""     
[40,] ""     
[41,] ""     
[42,] ""     
[43,] ""     
[44,] ""     
[45,] ""     
[46,] ""     
[47,] ""     
[48,] ""     
[49,] ""     
[50,] ""     
[51,] ""     
[52,] ""     
[53,] ""     
[54,] ""     
[55,] ""     
[56,] ""     
[57,] ""     
[58,] ""     
[59,] ""     
[60,] ""     
[61,] ""     
[62,] "apple"
[63,] ""     
[64,] ""     
[65,] ""     
[66,] ""     
[67,] ""     
[68,] ""     
[69,] ""     
[70,] ""     
[71,] ""     
[72,] ""     
[73,] ""     
[74,] ""     
[75,] ""     
[76,] ""     
[77,] ""     
[78,] ""     
[79,] ""     
[80,] ""     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"."</span>), <span class="fu">str_escape</span>(<span class="st">"."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"Hello, World!"</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(x, <span class="fu">boundary</span>(<span class="st">"character"</span>), <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]
[1,] "H"  "e"  "l"  "l"  "o"  ","  " "  "W"  "o"  "r"   "l"   "d"   "!"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(x, <span class="fu">boundary</span>(<span class="st">"line_break"</span>), <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]      [,2]    
[1,] "Hello, " "World!"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(x, <span class="fu">boundary</span>(<span class="st">"sentence"</span>), <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]           
[1,] "Hello, World!"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(x, <span class="fu">boundary</span>(<span class="st">"word"</span>), <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]    [,2]   
[1,] "Hello" "World"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_flatten</span>(fruit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "appleapricotavocadobananabell pepperbilberryblackberryblackcurrantblood orangeblueberryboysenberrybreadfruitcanary meloncantaloupecherimoyacherrychili pepperclementinecloudberrycoconutcranberrycucumbercurrantdamsondatedragonfruitdurianeggplantelderberryfeijoafiggoji berrygooseberrygrapegrapefruitguavahoneydewhuckleberryjackfruitjambuljujubekiwi fruitkumquatlemonlimeloquatlycheemandarinemangomulberrynectarinenutoliveorangepamelopapayapassionfruitpeachpearpersimmonphysalispineappleplumpomegranatepomelopurple mangosteenquinceraisinrambutanraspberryredcurrantrock melonsalal berrysatsumastar fruitstrawberrytamarillotangerineugli fruitwatermelon"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_flatten_comma</span>(fruit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple, apricot, avocado, banana, bell pepper, bilberry, blackberry, blackcurrant, blood orange, blueberry, boysenberry, breadfruit, canary melon, cantaloupe, cherimoya, cherry, chili pepper, clementine, cloudberry, coconut, cranberry, cucumber, currant, damson, date, dragonfruit, durian, eggplant, elderberry, feijoa, fig, goji berry, gooseberry, grape, grapefruit, guava, honeydew, huckleberry, jackfruit, jambul, jujube, kiwi fruit, kumquat, lemon, lime, loquat, lychee, mandarine, mango, mulberry, nectarine, nut, olive, orange, pamelo, papaya, passionfruit, peach, pear, persimmon, physalis, pineapple, plum, pomegranate, pomelo, purple mangosteen, quince, raisin, rambutan, raspberry, redcurrant, rock melon, salal berry, satsuma, star fruit, strawberry, tamarillo, tangerine, ugli fruit, watermelon"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">"I bought "</span>, <span class="st">"{fruit}"</span>, <span class="st">" by {rnorm(length(fruit), mean = 100, sd = 10) |&gt; format(digits = 3)} yen"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>I bought apple by  90.3 yen
I bought apricot by 101.2 yen
I bought avocado by  90.0 yen
I bought banana by 102.1 yen
I bought bell pepper by  81.2 yen
I bought bilberry by 113.2 yen
I bought blackberry by  94.6 yen
I bought blackcurrant by 103.7 yen
I bought blood orange by  95.5 yen
I bought blueberry by 110.6 yen
I bought boysenberry by  99.0 yen
I bought breadfruit by  93.1 yen
I bought canary melon by 106.1 yen
I bought cantaloupe by  95.7 yen
I bought cherimoya by 109.9 yen
I bought cherry by  92.7 yen
I bought chili pepper by  89.8 yen
I bought clementine by  95.4 yen
I bought cloudberry by  88.1 yen
I bought coconut by  80.9 yen
I bought cranberry by 108.0 yen
I bought cucumber by  91.2 yen
I bought currant by  89.8 yen
I bought damson by 100.6 yen
I bought date by  92.5 yen
I bought dragonfruit by 107.1 yen
I bought durian by 109.6 yen
I bought eggplant by 107.4 yen
I bought elderberry by  99.3 yen
I bought feijoa by 104.4 yen
I bought fig by 101.7 yen
I bought goji berry by 112.7 yen
I bought gooseberry by 107.2 yen
I bought grape by  82.8 yen
I bought grapefruit by 102.5 yen
I bought guava by 108.7 yen
I bought honeydew by  90.4 yen
I bought huckleberry by 102.3 yen
I bought jackfruit by 103.0 yen
I bought jambul by  91.4 yen
I bought jujube by 103.2 yen
I bought kiwi fruit by  94.5 yen
I bought kumquat by  97.1 yen
I bought lemon by  95.6 yen
I bought lime by  96.7 yen
I bought loquat by  89.7 yen
I bought lychee by  84.7 yen
I bought mandarine by 109.8 yen
I bought mango by  97.2 yen
I bought mulberry by 103.5 yen
I bought nectarine by 102.9 yen
I bought nut by 112.9 yen
I bought olive by  90.4 yen
I bought orange by  91.3 yen
I bought pamelo by  91.6 yen
I bought papaya by  90.1 yen
I bought passionfruit by  94.3 yen
I bought peach by 112.6 yen
I bought pear by 109.4 yen
I bought persimmon by 105.0 yen
I bought physalis by 105.7 yen
I bought pineapple by 105.9 yen
I bought plum by 104.2 yen
I bought pomegranate by  98.3 yen
I bought pomelo by  99.6 yen
I bought purple mangosteen by 100.7 yen
I bought quince by 106.3 yen
I bought raisin by 103.0 yen
I bought rambutan by  99.1 yen
I bought raspberry by 109.2 yen
I bought redcurrant by  80.2 yen
I bought rock melon by 107.5 yen
I bought salal berry by 107.2 yen
I bought satsuma by  88.1 yen
I bought star fruit by  96.4 yen
I bought strawberry by 110.6 yen
I bought tamarillo by  88.0 yen
I bought tangerine by  83.3 yen
I bought ugli fruit by 112.4 yen
I bought watermelon by 103.1 yen</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">str_glue_data</span>(<span class="st">"Is {height} over 100? {ifelse(height &gt;= 100, 'Yes','No')}."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Is 172 over 100? Yes.
Is 167 over 100? Yes.
Is 96 over 100? No.
Is 202 over 100? Yes.
Is 150 over 100? Yes.
Is 178 over 100? Yes.
Is 165 over 100? Yes.
Is 97 over 100? No.
Is 183 over 100? Yes.
Is 182 over 100? Yes.
Is 188 over 100? Yes.
Is 180 over 100? Yes.
Is 228 over 100? Yes.
Is 180 over 100? Yes.
Is 173 over 100? Yes.
Is 175 over 100? Yes.
Is 170 over 100? Yes.
Is 180 over 100? Yes.
Is 66 over 100? No.
Is 170 over 100? Yes.
Is 183 over 100? Yes.
Is 200 over 100? Yes.
Is 190 over 100? Yes.
Is 177 over 100? Yes.
Is 175 over 100? Yes.
Is 180 over 100? Yes.
Is 150 over 100? Yes.
Is NA over 100? NA.
Is 88 over 100? No.
Is 160 over 100? Yes.
Is 193 over 100? Yes.
Is 191 over 100? Yes.
Is 170 over 100? Yes.
Is 185 over 100? Yes.
Is 196 over 100? Yes.
Is 224 over 100? Yes.
Is 206 over 100? Yes.
Is 183 over 100? Yes.
Is 137 over 100? Yes.
Is 112 over 100? Yes.
Is 183 over 100? Yes.
Is 163 over 100? Yes.
Is 175 over 100? Yes.
Is 180 over 100? Yes.
Is 178 over 100? Yes.
Is 79 over 100? No.
Is 94 over 100? No.
Is 122 over 100? Yes.
Is 163 over 100? Yes.
Is 188 over 100? Yes.
Is 198 over 100? Yes.
Is 196 over 100? Yes.
Is 171 over 100? Yes.
Is 184 over 100? Yes.
Is 188 over 100? Yes.
Is 264 over 100? Yes.
Is 188 over 100? Yes.
Is 196 over 100? Yes.
Is 185 over 100? Yes.
Is 157 over 100? Yes.
Is 183 over 100? Yes.
Is 183 over 100? Yes.
Is 170 over 100? Yes.
Is 166 over 100? Yes.
Is 165 over 100? Yes.
Is 193 over 100? Yes.
Is 191 over 100? Yes.
Is 183 over 100? Yes.
Is 168 over 100? Yes.
Is 198 over 100? Yes.
Is 229 over 100? Yes.
Is 213 over 100? Yes.
Is 167 over 100? Yes.
Is 96 over 100? No.
Is 193 over 100? Yes.
Is 191 over 100? Yes.
Is 178 over 100? Yes.
Is 216 over 100? Yes.
Is 234 over 100? Yes.
Is 188 over 100? Yes.
Is 178 over 100? Yes.
Is 206 over 100? Yes.
Is NA over 100? NA.
Is NA over 100? NA.
Is NA over 100? NA.
Is NA over 100? NA.
Is NA over 100? NA.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA</span>,<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>,<span class="cn">NA</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA  "a" "b" "c" NA </code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"fruit_"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA        "fruit_a" "fruit_b" "fruit_c" NA       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"fruit_"</span>, <span class="fu">str_replace_na</span>(x, <span class="at">replacement =</span> <span class="st">"DKNA"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "fruit_DKNA" "fruit_a"    "fruit_b"    "fruit_c"    "fruit_DKNA"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(LETTERS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
[20] "t" "u" "v" "w" "x" "y" "z"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(fruit, <span class="dv">1</span>, <span class="dv">1</span>) <span class="ot">&lt;-</span> <span class="fu">str_to_upper</span>(<span class="fu">str_sub</span>(fruit, <span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>fruit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Apple"             "Apricot"           "Avocado"          
 [4] "Banana"            "Bell pepper"       "Bilberry"         
 [7] "Blackberry"        "Blackcurrant"      "Blood orange"     
[10] "Blueberry"         "Boysenberry"       "Breadfruit"       
[13] "Canary melon"      "Cantaloupe"        "Cherimoya"        
[16] "Cherry"            "Chili pepper"      "Clementine"       
[19] "Cloudberry"        "Coconut"           "Cranberry"        
[22] "Cucumber"          "Currant"           "Damson"           
[25] "Date"              "Dragonfruit"       "Durian"           
[28] "Eggplant"          "Elderberry"        "Feijoa"           
[31] "Fig"               "Goji berry"        "Gooseberry"       
[34] "Grape"             "Grapefruit"        "Guava"            
[37] "Honeydew"          "Huckleberry"       "Jackfruit"        
[40] "Jambul"            "Jujube"            "Kiwi fruit"       
[43] "Kumquat"           "Lemon"             "Lime"             
[46] "Loquat"            "Lychee"            "Mandarine"        
[49] "Mango"             "Mulberry"          "Nectarine"        
[52] "Nut"               "Olive"             "Orange"           
[55] "Pamelo"            "Papaya"            "Passionfruit"     
[58] "Peach"             "Pear"              "Persimmon"        
[61] "Physalis"          "Pineapple"         "Plum"             
[64] "Pomegranate"       "Pomelo"            "Purple mangosteen"
[67] "Quince"            "Raisin"            "Rambutan"         
[70] "Raspberry"         "Redcurrant"        "Rock melon"       
[73] "Salal berry"       "Satsuma"           "Star fruit"       
[76] "Strawberry"        "Tamarillo"         "Tangerine"        
[79] "Ugli fruit"        "Watermelon"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(<span class="st">"gender"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "GENDER"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(<span class="st">"全角のａ"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "全角のＡ"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(<span class="st">"ESTSIMATE"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "estsimate"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(<span class="st">"Ａ"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ａ"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruit, <span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [3] │ Avoc&lt;a&gt;do
 [4] │ B&lt;a&gt;n&lt;a&gt;n&lt;a&gt;
 [7] │ Bl&lt;a&gt;ckberry
 [8] │ Bl&lt;a&gt;ckcurr&lt;a&gt;nt
 [9] │ Blood or&lt;a&gt;nge
[12] │ Bre&lt;a&gt;dfruit
[13] │ C&lt;a&gt;n&lt;a&gt;ry melon
[14] │ C&lt;a&gt;nt&lt;a&gt;loupe
[15] │ Cherimoy&lt;a&gt;
[21] │ Cr&lt;a&gt;nberry
[23] │ Curr&lt;a&gt;nt
[24] │ D&lt;a&gt;mson
[25] │ D&lt;a&gt;te
[26] │ Dr&lt;a&gt;gonfruit
[27] │ Duri&lt;a&gt;n
[28] │ Eggpl&lt;a&gt;nt
[30] │ Feijo&lt;a&gt;
[34] │ Gr&lt;a&gt;pe
[35] │ Gr&lt;a&gt;pefruit
[36] │ Gu&lt;a&gt;v&lt;a&gt;
... and 28 more</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruit, <span class="st">"[ae]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ Appl&lt;e&gt;
 [3] │ Avoc&lt;a&gt;do
 [4] │ B&lt;a&gt;n&lt;a&gt;n&lt;a&gt;
 [5] │ B&lt;e&gt;ll p&lt;e&gt;pp&lt;e&gt;r
 [6] │ Bilb&lt;e&gt;rry
 [7] │ Bl&lt;a&gt;ckb&lt;e&gt;rry
 [8] │ Bl&lt;a&gt;ckcurr&lt;a&gt;nt
 [9] │ Blood or&lt;a&gt;ng&lt;e&gt;
[10] │ Blu&lt;e&gt;b&lt;e&gt;rry
[11] │ Boys&lt;e&gt;nb&lt;e&gt;rry
[12] │ Br&lt;e&gt;&lt;a&gt;dfruit
[13] │ C&lt;a&gt;n&lt;a&gt;ry m&lt;e&gt;lon
[14] │ C&lt;a&gt;nt&lt;a&gt;loup&lt;e&gt;
[15] │ Ch&lt;e&gt;rimoy&lt;a&gt;
[16] │ Ch&lt;e&gt;rry
[17] │ Chili p&lt;e&gt;pp&lt;e&gt;r
[18] │ Cl&lt;e&gt;m&lt;e&gt;ntin&lt;e&gt;
[19] │ Cloudb&lt;e&gt;rry
[21] │ Cr&lt;a&gt;nb&lt;e&gt;rry
[22] │ Cucumb&lt;e&gt;r
... and 53 more</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruit, <span class="st">".a."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [3] │ Avo&lt;cad&gt;o
 [4] │ &lt;Ban&gt;ana
 [7] │ B&lt;lac&gt;kberry
 [8] │ B&lt;lac&gt;kcur&lt;ran&gt;t
 [9] │ Blood o&lt;ran&gt;ge
[12] │ Br&lt;ead&gt;fruit
[13] │ &lt;Can&gt;ary melon
[14] │ &lt;Can&gt;&lt;tal&gt;oupe
[21] │ C&lt;ran&gt;berry
[23] │ Cur&lt;ran&gt;t
[24] │ &lt;Dam&gt;son
[25] │ &lt;Dat&gt;e
[26] │ D&lt;rag&gt;onfruit
[27] │ Dur&lt;ian&gt;
[28] │ Eggp&lt;lan&gt;t
[34] │ G&lt;rap&gt;e
[35] │ G&lt;rap&gt;efruit
[36] │ G&lt;uav&gt;a
[39] │ &lt;Jac&gt;kfruit
[40] │ &lt;Jam&gt;bul
... and 26 more</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruit, <span class="st">"^A"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;A&gt;pple
[2] │ &lt;A&gt;pricot
[3] │ &lt;A&gt;vocado</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruit, <span class="st">"a$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [4] │ Banan&lt;a&gt;
[15] │ Cherimoy&lt;a&gt;
[30] │ Feijo&lt;a&gt;
[36] │ Guav&lt;a&gt;
[56] │ Papay&lt;a&gt;
[74] │ Satsum&lt;a&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruit, <span class="st">".a.|.b."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [3] │ Avo&lt;cad&gt;o
 [4] │ &lt;Ban&gt;ana
 [6] │ Bi&lt;lbe&gt;rry
 [7] │ B&lt;lac&gt;&lt;kbe&gt;rry
 [8] │ B&lt;lac&gt;kcur&lt;ran&gt;t
 [9] │ Blood o&lt;ran&gt;ge
[10] │ Blu&lt;ebe&gt;rry
[11] │ Boyse&lt;nbe&gt;rry
[12] │ Br&lt;ead&gt;fruit
[13] │ &lt;Can&gt;ary melon
[14] │ &lt;Can&gt;&lt;tal&gt;oupe
[19] │ Clou&lt;dbe&gt;rry
[21] │ C&lt;ran&gt;berry
[22] │ Cucu&lt;mbe&gt;r
[23] │ Cur&lt;ran&gt;t
[24] │ &lt;Dam&gt;son
[25] │ &lt;Dat&gt;e
[26] │ D&lt;rag&gt;onfruit
[27] │ Dur&lt;ian&gt;
[28] │ Eggp&lt;lan&gt;t
... and 37 more</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(words, <span class="st">"^y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[975] │ &lt;y&gt;ear
[976] │ &lt;y&gt;es
[977] │ &lt;y&gt;esterday
[978] │ &lt;y&gt;et
[979] │ &lt;y&gt;ou
[980] │ &lt;y&gt;oung</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(words, <span class="st">"x$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[108] │ bo&lt;x&gt;
[747] │ se&lt;x&gt;
[772] │ si&lt;x&gt;
[841] │ ta&lt;x&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(words, <span class="st">"^...$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [9] │ &lt;act&gt;
 [12] │ &lt;add&gt;
 [22] │ &lt;age&gt;
 [24] │ &lt;ago&gt;
 [26] │ &lt;air&gt;
 [27] │ &lt;all&gt;
 [38] │ &lt;and&gt;
 [41] │ &lt;any&gt;
 [51] │ &lt;arm&gt;
 [54] │ &lt;art&gt;
 [56] │ &lt;ask&gt;
 [68] │ &lt;bad&gt;
 [69] │ &lt;bag&gt;
 [73] │ &lt;bar&gt;
 [82] │ &lt;bed&gt;
 [89] │ &lt;bet&gt;
 [91] │ &lt;big&gt;
 [94] │ &lt;bit&gt;
[108] │ &lt;box&gt;
[109] │ &lt;boy&gt;
... and 90 more</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(words, <span class="st">"^*.......*$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [4] │ &lt;absolute&gt;
 [5] │ &lt;accept&gt;
 [6] │ &lt;account&gt;
 [7] │ &lt;achieve&gt;
 [8] │ &lt;across&gt;
[10] │ &lt;active&gt;
[11] │ &lt;actual&gt;
[13] │ &lt;address&gt;
[15] │ &lt;advertise&gt;
[16] │ &lt;affect&gt;
[17] │ &lt;afford&gt;
[19] │ &lt;afternoon&gt;
[21] │ &lt;against&gt;
[29] │ &lt;almost&gt;
[31] │ &lt;already&gt;
[32] │ &lt;alright&gt;
[34] │ &lt;although&gt;
[35] │ &lt;always&gt;
[36] │ &lt;america&gt;
[37] │ &lt;amount&gt;
... and 368 more</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(words, <span class="st">"[^a-u]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [7] │ achie&lt;v&gt;e
 [10] │ acti&lt;v&gt;e
 [15] │ ad&lt;v&gt;ertise
 [28] │ allo&lt;w&gt;
 [31] │ alread&lt;y&gt;
 [35] │ al&lt;w&gt;a&lt;y&gt;s
 [40] │ ans&lt;w&gt;er
 [41] │ an&lt;y&gt;
 [45] │ appl&lt;y&gt;
 [61] │ authorit&lt;y&gt;
 [62] │ a&lt;v&gt;ailable
 [63] │ a&lt;w&gt;are
 [64] │ a&lt;w&gt;a&lt;y&gt;
 [65] │ a&lt;w&gt;ful
 [66] │ bab&lt;y&gt;
 [79] │ beaut&lt;y&gt;
 [86] │ belie&lt;v&gt;e
 [90] │ bet&lt;w&gt;een
 [98] │ blo&lt;w&gt;
[102] │ bod&lt;y&gt;
... and 229 more</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(words, <span class="st">"a|b"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ &lt;a&gt;
 [2] │ &lt;a&gt;&lt;b&gt;le
 [3] │ &lt;a&gt;&lt;b&gt;out
 [4] │ &lt;a&gt;&lt;b&gt;solute
 [5] │ &lt;a&gt;ccept
 [6] │ &lt;a&gt;ccount
 [7] │ &lt;a&gt;chieve
 [8] │ &lt;a&gt;cross
 [9] │ &lt;a&gt;ct
[10] │ &lt;a&gt;ctive
[11] │ &lt;a&gt;ctu&lt;a&gt;l
[12] │ &lt;a&gt;dd
[13] │ &lt;a&gt;ddress
[14] │ &lt;a&gt;dmit
[15] │ &lt;a&gt;dvertise
[16] │ &lt;a&gt;ffect
[17] │ &lt;a&gt;fford
[18] │ &lt;a&gt;fter
[19] │ &lt;a&gt;fternoon
[20] │ &lt;a&gt;g&lt;a&gt;in
... and 391 more</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(words, <span class="st">"(a|b)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ &lt;a&gt;
 [2] │ &lt;a&gt;&lt;b&gt;le
 [3] │ &lt;a&gt;&lt;b&gt;out
 [4] │ &lt;a&gt;&lt;b&gt;solute
 [5] │ &lt;a&gt;ccept
 [6] │ &lt;a&gt;ccount
 [7] │ &lt;a&gt;chieve
 [8] │ &lt;a&gt;cross
 [9] │ &lt;a&gt;ct
[10] │ &lt;a&gt;ctive
[11] │ &lt;a&gt;ctu&lt;a&gt;l
[12] │ &lt;a&gt;dd
[13] │ &lt;a&gt;ddress
[14] │ &lt;a&gt;dmit
[15] │ &lt;a&gt;dvertise
[16] │ &lt;a&gt;ffect
[17] │ &lt;a&gt;fford
[18] │ &lt;a&gt;fter
[19] │ &lt;a&gt;fternoon
[20] │ &lt;a&gt;g&lt;a&gt;in
... and 391 more</code></pre>
</div>
</div>
</section>
<section id="正規表現regular-expression" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="正規表現regular-expression"><span class="header-section-number">7.3</span> 正規表現（regular expression）</h2>
<ul>
<li>extended regular expressions (the default)</li>
<li>Perl-like regular expressions</li>
<li>literal regular expressions</li>
</ul>
<p>メタキャラクター：<code>. \ | ( ) [ { ^ $ * + ?</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>letters</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
[20] "t" "u" "v" "w" "x" "y" "z"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">"j|k"</span>, fruit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7  8 30 32 38 39 41 72</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">"[jk]"</span>, fruit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7  8 30 32 38 39 41 72</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"j|k"</span>, fruit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[25] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE
[37] FALSE  TRUE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
[73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"[jk]"</span>, fruit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[25] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE
[37] FALSE  TRUE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
[73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">"[jk]"</span>,<span class="st">"XXXXX"</span>, fruit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Apple"             "Apricot"           "Avocado"          
 [4] "Banana"            "Bell pepper"       "Bilberry"         
 [7] "BlacXXXXXberry"    "BlacXXXXXcurrant"  "Blood orange"     
[10] "Blueberry"         "Boysenberry"       "Breadfruit"       
[13] "Canary melon"      "Cantaloupe"        "Cherimoya"        
[16] "Cherry"            "Chili pepper"      "Clementine"       
[19] "Cloudberry"        "Coconut"           "Cranberry"        
[22] "Cucumber"          "Currant"           "Damson"           
[25] "Date"              "Dragonfruit"       "Durian"           
[28] "Eggplant"          "Elderberry"        "FeiXXXXXoa"       
[31] "Fig"               "GoXXXXXi berry"    "Gooseberry"       
[34] "Grape"             "Grapefruit"        "Guava"            
[37] "Honeydew"          "HucXXXXXleberry"   "JacXXXXXfruit"    
[40] "Jambul"            "JuXXXXXube"        "Kiwi fruit"       
[43] "Kumquat"           "Lemon"             "Lime"             
[46] "Loquat"            "Lychee"            "Mandarine"        
[49] "Mango"             "Mulberry"          "Nectarine"        
[52] "Nut"               "Olive"             "Orange"           
[55] "Pamelo"            "Papaya"            "Passionfruit"     
[58] "Peach"             "Pear"              "Persimmon"        
[61] "Physalis"          "Pineapple"         "Plum"             
[64] "Pomegranate"       "Pomelo"            "Purple mangosteen"
[67] "Quince"            "Raisin"            "Rambutan"         
[70] "Raspberry"         "Redcurrant"        "RocXXXXX melon"   
[73] "Salal berry"       "Satsuma"           "Star fruit"       
[76] "Strawberry"        "Tamarillo"         "Tangerine"        
[79] "Ugli fruit"        "Watermelon"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">"[jk]"</span>,<span class="st">"XXXXX"</span>, fruit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Apple"             "Apricot"           "Avocado"          
 [4] "Banana"            "Bell pepper"       "Bilberry"         
 [7] "BlacXXXXXberry"    "BlacXXXXXcurrant"  "Blood orange"     
[10] "Blueberry"         "Boysenberry"       "Breadfruit"       
[13] "Canary melon"      "Cantaloupe"        "Cherimoya"        
[16] "Cherry"            "Chili pepper"      "Clementine"       
[19] "Cloudberry"        "Coconut"           "Cranberry"        
[22] "Cucumber"          "Currant"           "Damson"           
[25] "Date"              "Dragonfruit"       "Durian"           
[28] "Eggplant"          "Elderberry"        "FeiXXXXXoa"       
[31] "Fig"               "GoXXXXXi berry"    "Gooseberry"       
[34] "Grape"             "Grapefruit"        "Guava"            
[37] "Honeydew"          "HucXXXXXleberry"   "JacXXXXXfruit"    
[40] "Jambul"            "JuXXXXXube"        "Kiwi fruit"       
[43] "Kumquat"           "Lemon"             "Lime"             
[46] "Loquat"            "Lychee"            "Mandarine"        
[49] "Mango"             "Mulberry"          "Nectarine"        
[52] "Nut"               "Olive"             "Orange"           
[55] "Pamelo"            "Papaya"            "Passionfruit"     
[58] "Peach"             "Pear"              "Persimmon"        
[61] "Physalis"          "Pineapple"         "Plum"             
[64] "Pomegranate"       "Pomelo"            "Purple mangosteen"
[67] "Quince"            "Raisin"            "Rambutan"         
[70] "Raspberry"         "Redcurrant"        "RocXXXXX melon"   
[73] "Salal berry"       "Satsuma"           "Star fruit"       
[76] "Strawberry"        "Tamarillo"         "Tangerine"        
[79] "Ugli fruit"        "Watermelon"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"Hello World!"</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 文頭</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"^e"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"^H"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"^h"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 文末</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"d$"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"!$"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># いずれか</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"[!]"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"[a]"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"[A-Za-z0-9]"</span>, <span class="st">"!!!!!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"[A-Za-z0-9]"</span>, <span class="st">"99999"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"[A-Za-z0-9]"</span>, <span class="st">"#####"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"[A-Za-z0-9]"</span>, <span class="st">"####1#"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># グルーピング</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"(e)"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"(e) +(d)"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"(e)+(w)"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"(H)(e)"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"(H)(l)"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">"[e]"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"[e]"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"e"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"l|k"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"e"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"h"</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"."</span>, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">"[e]"</span>, letters)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"[e]"</span>, letters)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[25] FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"e"</span>, letters)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[25] FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"l|k"</span>, letters)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[25] FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"e"</span>, letters)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[25] FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"h"</span>, letters)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[25] FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"."</span>, letters)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>starwars<span class="sc">$</span>name[<span class="fu">grepl</span>(<span class="st">"aa|[k]"</span>, starwars<span class="sc">$</span>name)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Luke Skywalker"        "Biggs Darklighter"     "Anakin Skywalker"     
 [4] "Wilhuff Tarkin"        "Jek Tono Porkins"      "Bossk"                
 [7] "Ackbar"                "Wicket Systri Warrick" "Jar Jar Binks"        
[10] "Quarsh Panaka"         "Shmi Skywalker"        "Dooku"                
[13] "Shaak Ti"             </code></pre>
</div>
</div>
</section>
<section id="any_of-all_of" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="any_of-all_of"><span class="header-section-number">7.4</span> any_of, all_of</h2>
<p>変数名をオブジェクトとして用いるときに便利．</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>select_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"height"</span>, <span class="st">"mass"</span>)</span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(select_vars) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
ℹ Please use `all_of()` or `any_of()` instead.
  # Was:
  data %&gt;% select(select_vars)

  # Now:
  data %&gt;% select(all_of(select_vars))

See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 2
   height  mass
    &lt;int&gt; &lt;dbl&gt;
 1    172    77
 2    167    75
 3     96    32
 4    202   136
 5    150    49
 6    178   120
 7    165    75
 8     97    32
 9    183    84
10    182    77
# ℹ 77 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(select_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 2
   height  mass
    &lt;int&gt; &lt;dbl&gt;
 1    172    77
 2    167    75
 3     96    32
 4    202   136
 5    150    49
 6    178   120
 7    165    75
 8     97    32
 9    183    84
10    182    77
# ℹ 77 more rows</code></pre>
</div>
</div>
</section>
<section id="map" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="map"><span class="header-section-number">7.5</span> map</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751 2.828427
 [9] 3.000000 3.162278</code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(x, sqrt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 1

[[2]]
[1] 1.414214

[[3]]
[1] 1.732051

[[4]]
[1] 2

[[5]]
[1] 2.236068

[[6]]
[1] 2.44949

[[7]]
[1] 2.645751

[[8]]
[1] 2.828427

[[9]]
[1] 3

[[10]]
[1] 3.162278</code></pre>
</div>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_vec</span>(x, sqrt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751 2.828427
 [9] 3.000000 3.162278</code></pre>
</div>
</div>
<p>d &lt;- d %&gt;% mutate(gpa_std = (gpa_sum - mean(gpa_sum, na.rm = TRUE)) / sd(gpa_sum, na.rm = TRUE))</p>
</section>
<section id="部分一致" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="部分一致"><span class="header-section-number">7.6</span> 部分一致</h2>
<p><code>data.frame</code>形式であれば<code>$</code>で変数名の部分一致が利用できるが，<code>tibble</code>形式ではできない．部分一致によってエラーが生じる可能性もあるので省略せずに入力するほうが良い．</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>starwars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
 3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 5 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 7 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…
 9 Biggs D…    183    84 black      light      brown           24   male  mascu…
10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
# ℹ 77 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>starwars<span class="sc">$</span>hei</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `hei`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>starwars<span class="sc">$</span>ha</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `ha`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>starwars_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(starwars) </span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>starwars_df<span class="sc">$</span>hei</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 172 167  96 202 150 178 165  97 183 182 188 180 228 180 173 175 170 180  66
[20] 170 183 200 190 177 175 180 150  NA  88 160 193 191 170 185 196 224 206 183
[39] 137 112 183 163 175 180 178  79  94 122 163 188 198 196 171 184 188 264 188
[58] 196 185 157 183 183 170 166 165 193 191 183 168 198 229 213 167  96 193 191
[77] 178 216 234 188 178 206  NA  NA  NA  NA  NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>starwars_df<span class="sc">$</span>ha</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "blond"         NA              NA              "none"         
 [5] "brown"         "brown, grey"   "brown"         NA             
 [9] "black"         "auburn, white" "blond"         "auburn, grey" 
[13] "brown"         "brown"         NA              NA             
[17] "brown"         "brown"         "white"         "grey"         
[21] "black"         "none"          "none"          "black"        
[25] "none"          "none"          "auburn"        "brown"        
[29] "brown"         "none"          "brown"         "none"         
[33] "blond"         "brown"         "none"          "none"         
[37] "none"          "brown"         "black"         "none"         
[41] "black"         "black"         "none"          "none"         
[45] "none"          "none"          "none"          "none"         
[49] "none"          "none"          "white"         "none"         
[53] "black"         "none"          "none"          "none"         
[57] "none"          "none"          "black"         "brown"        
[61] "brown"         "none"          "black"         "black"        
[65] "brown"         "white"         "black"         "black"        
[69] "blonde"        "none"          "none"          "none"         
[73] "white"         "none"          "none"          "none"         
[77] "none"          "none"          "brown"         "brown"        
[81] "none"          "none"          "black"         "brown"        
[85] "brown"         "none"          "none"         </code></pre>
</div>
</div>
</section>
<section id="因子" class="level2" data-number="7.7">
<h2 data-number="7.7" class="anchored" data-anchor-id="因子"><span class="header-section-number">7.7</span> 因子</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">factor</span>(x)</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 1 1 1 0
Levels: 0 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 2 levels "0","1": 1 2 2 2 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$levels
[1] "0" "1"

$class
[1] "factor"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "0" "1"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 2 2 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">as.character</span>(y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 1 1 1 0</code></pre>
</div>
</div>
</section>
<section id="集計データを個票データに変換する" class="level2" data-number="7.8">
<h2 data-number="7.8" class="anchored" data-anchor-id="集計データを個票データに変換する"><span class="header-section-number">7.8</span> 集計データを個票データに変換する</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># クロス表</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a>occupationalStatus</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      destination
origin   1   2   3   4   5   6   7   8
     1  50  19  26   8   7  11   6   2
     2  16  40  34  18  11  20   8   3
     3  12  35  65  66  35  88  23  21
     4  11  20  58 110  40 183  64  32
     5   2   8  12  23  25  46  28  12
     6  12  28 102 162  90 554 230 177
     7   0   6  19  40  21 158 143  71
     8   0   3  14  32  15 126  91 106</code></pre>
</div>
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 集計データ</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(occupationalStatus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   origin destination Freq
1       1           1   50
2       2           1   16
3       3           1   12
4       4           1   11
5       5           1    2
6       6           1   12
7       7           1    0
8       8           1    0
9       1           2   19
10      2           2   40
11      3           2   35
12      4           2   20
13      5           2    8
14      6           2   28
15      7           2    6
16      8           2    3
17      1           3   26
18      2           3   34
19      3           3   65
20      4           3   58
21      5           3   12
22      6           3  102
23      7           3   19
24      8           3   14
25      1           4    8
26      2           4   18
27      3           4   66
28      4           4  110
29      5           4   23
30      6           4  162
31      7           4   40
32      8           4   32
33      1           5    7
34      2           5   11
35      3           5   35
36      4           5   40
37      5           5   25
38      6           5   90
39      7           5   21
40      8           5   15
41      1           6   11
42      2           6   20
43      3           6   88
44      4           6  183
45      5           6   46
46      6           6  554
47      7           6  158
48      8           6  126
49      1           7    6
50      2           7    8
51      3           7   23
52      4           7   64
53      5           7   28
54      6           7  230
55      7           7  143
56      8           7   91
57      1           8    2
58      2           8    3
59      3           8   21
60      4           8   32
61      5           8   12
62      6           8  177
63      7           8   71
64      8           8  106</code></pre>
</div>
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 個票データ</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a>df_occupationalStatus <span class="ot">&lt;-</span> vcdExtra<span class="sc">::</span><span class="fu">expand.dft</span>(<span class="fu">data.frame</span>(occupationalStatus), <span class="at">dreq =</span> <span class="st">"Freq"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(origin<span class="sc">:</span>destination, factor))</span>
<span id="cb215-4"><a href="#cb215-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb215-5"><a href="#cb215-5" aria-hidden="true" tabindex="-1"></a>df_occupationalStatus <span class="sc">|&gt;</span> <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     origin      destination  
 6      :1355   6      :1186  
 4      : 518   7      : 593  
 7      : 458   4      : 459  
 8      : 387   8      : 424  
 3      : 345   3      : 330  
 5      : 156   5      : 244  
 (Other): 279   (Other): 262  </code></pre>
</div>
</div>
</section>
<section id="関数の中身を確認する" class="level2" data-number="7.9">
<h2 data-number="7.9" class="anchored" data-anchor-id="関数の中身を確認する"><span class="header-section-number">7.9</span> 関数の中身を確認する</h2>
<p><code>mean()</code>関数がどのようにして作成されているのかを確認したい場合，<code>mean</code>のように<code>()</code>をとって入力すればよい．しかし，<code>UseMethod("mean")</code>のように関数が表示され，中身を確認できない場合もある．</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a>mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (x, ...) 
UseMethod("mean")
&lt;bytecode: 0x1500fc4e8&gt;
&lt;environment: namespace:base&gt;</code></pre>
</div>
</div>
<p>このような場合は，<code>methods()</code>関数を用いるとよい</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] mean,ANY-method          mean,denseMatrix-method  mean,sparseMatrix-method
 [4] mean,sparseVector-method mean.Date                mean.default            
 [7] mean.difftime            mean.POSIXct             mean.POSIXlt            
[10] mean.quosure*            mean.vctrs_vctr*         mean.yearmon*           
[13] mean.yearqtr*            mean.zoo*               
see '?methods' for accessing help and source code</code></pre>
</div>
</div>
<p>様々な結果が示されるがここでは，2めの要素にある<code>mean.default*</code>を確認しよう．<code>*</code>をとって<code>mean.default</code>と入力するだけでよい．</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a>mean.default</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (x, trim = 0, na.rm = FALSE, ...) 
{
    if (!is.numeric(x) &amp;&amp; !is.complex(x) &amp;&amp; !is.logical(x)) {
        warning("argument is not numeric or logical: returning NA")
        return(NA_real_)
    }
    if (isTRUE(na.rm)) 
        x &lt;- x[!is.na(x)]
    if (!is.numeric(trim) || length(trim) != 1L) 
        stop("'trim' must be numeric of length one")
    n &lt;- length(x)
    if (trim &gt; 0 &amp;&amp; n) {
        if (is.complex(x)) 
            stop("trimmed means are not defined for complex data")
        if (anyNA(x)) 
            return(NA_real_)
        if (trim &gt;= 0.5) 
            return(stats::median(x, na.rm = FALSE))
        lo &lt;- floor(n * trim) + 1
        hi &lt;- n + 1 - lo
        x &lt;- sort.int(x, partial = unique(c(lo, hi)))[lo:hi]
    }
    .Internal(mean(x))
}
&lt;bytecode: 0x1330142b0&gt;
&lt;environment: namespace:base&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getAnywhere</span>(mean.default)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A single object matching 'mean.default' was found
It was found in the following places
  package:base
  registered S3 method for mean from namespace base
  namespace:base
with value

function (x, trim = 0, na.rm = FALSE, ...) 
{
    if (!is.numeric(x) &amp;&amp; !is.complex(x) &amp;&amp; !is.logical(x)) {
        warning("argument is not numeric or logical: returning NA")
        return(NA_real_)
    }
    if (isTRUE(na.rm)) 
        x &lt;- x[!is.na(x)]
    if (!is.numeric(trim) || length(trim) != 1L) 
        stop("'trim' must be numeric of length one")
    n &lt;- length(x)
    if (trim &gt; 0 &amp;&amp; n) {
        if (is.complex(x)) 
            stop("trimmed means are not defined for complex data")
        if (anyNA(x)) 
            return(NA_real_)
        if (trim &gt;= 0.5) 
            return(stats::median(x, na.rm = FALSE))
        lo &lt;- floor(n * trim) + 1
        hi &lt;- n + 1 - lo
        x &lt;- sort.int(x, partial = unique(c(lo, hi)))[lo:hi]
    }
    .Internal(mean(x))
}
&lt;bytecode: 0x1330142b0&gt;
&lt;environment: namespace:base&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DescTools)</span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>OddsRatio</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (x, conf.level = NULL, ...) 
{
    UseMethod("OddsRatio")
}
&lt;bytecode: 0x14028e1a8&gt;
&lt;environment: namespace:DescTools&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(OddsRatio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] OddsRatio.default*  OddsRatio.glm*      OddsRatio.multinom*
[4] OddsRatio.zeroinfl*
see '?methods' for accessing help and source code</code></pre>
</div>
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a>DescTools<span class="sc">:::</span>OddsRatio.default</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (x, conf.level = NULL, y = NULL, method = c("wald", 
    "mle", "midp"), interval = c(0, 1000), ...) 
{
    if (!is.null(y)) 
        x &lt;- table(x, y, ...)
    if (is.null(conf.level)) 
        conf.level &lt;- NA
    p &lt;- (d &lt;- dim(x))[1L]
    if (!is.numeric(x) || length(d) != 2L || p != d[2L] || p != 
        2L) 
        stop("'x' is not a 2x2 numeric matrix")
    switch(match.arg(arg = method, choices = c("wald", "mle", 
        "midp")), wald = {
        if (any(x == 0)) x &lt;- x + 0.5
        lx &lt;- log(x)
        or &lt;- exp(lx[1, 1] + lx[2, 2] - lx[1, 2] - lx[2, 1])
        if (is.na(conf.level)) {
            res &lt;- or
        } else {
            sigma2lor &lt;- sum(1/x)
            ci &lt;- or * exp(c(1, -1) * qnorm((1 - conf.level)/2) * 
                sqrt(sigma2lor))
            res &lt;- c(`odds ratio` = or, lwr.ci = ci[1], upr.ci = ci[2])
        }
    }, mle = {
        if (is.na(conf.level)) {
            res &lt;- unname(fisher.test(x, conf.int = FALSE)$estimate)
        } else {
            res &lt;- fisher.test(x, conf.level = conf.level)
            res &lt;- c(res$estimate, lwr.ci = res$conf.int[1], 
                upr.ci = res$conf.int[2])
        }
    }, midp = {
        a1 &lt;- x[1, 1]
        a0 &lt;- x[1, 2]
        b1 &lt;- x[2, 1]
        b0 &lt;- x[2, 2]
        or &lt;- 1
        mue &lt;- function(a1, a0, b1, b0, or) {
            mm &lt;- matrix(c(a1, a0, b1, b0), 2, 2, byrow = TRUE)
            fisher.test(mm, or = or, alternative = "l")$p - fisher.test(x = x, 
                or = or, alternative = "g")$p
        }
        midp &lt;- function(a1, a0, b1, b0, or = 1) {
            mm &lt;- matrix(c(a1, a0, b1, b0), 2, 2, byrow = TRUE)
            lteqtoa1 &lt;- fisher.test(mm, or = or, alternative = "l")$p.val
            gteqtoa1 &lt;- fisher.test(mm, or = or, alternative = "g")$p.val
            0.5 * (lteqtoa1 - gteqtoa1 + 1)
        }
        EST &lt;- uniroot(function(or) {
            mue(a1, a0, b1, b0, or)
        }, interval = interval)$root
        if (is.na(conf.level)) {
            res &lt;- EST
        } else {
            alpha &lt;- 1 - conf.level
            LCL &lt;- uniroot(function(or) {
                1 - midp(a1, a0, b1, b0, or) - alpha/2
            }, interval = interval)$root
            UCL &lt;- 1/uniroot(function(or) {
                midp(a1, a0, b1, b0, or = 1/or) - alpha/2
            }, interval = interval)$root
            res &lt;- c(`odds ratio` = EST, lwr.ci = LCL, upr.ci = UCL)
        }
    })
    return(res)
}
&lt;bytecode: 0x1406baff8&gt;
&lt;environment: namespace:DescTools&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getAnywhere</span>(OddsRatio.default)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A single object matching 'OddsRatio.default' was found
It was found in the following places
  registered S3 method for OddsRatio from namespace DescTools
  namespace:DescTools
with value

function (x, conf.level = NULL, y = NULL, method = c("wald", 
    "mle", "midp"), interval = c(0, 1000), ...) 
{
    if (!is.null(y)) 
        x &lt;- table(x, y, ...)
    if (is.null(conf.level)) 
        conf.level &lt;- NA
    p &lt;- (d &lt;- dim(x))[1L]
    if (!is.numeric(x) || length(d) != 2L || p != d[2L] || p != 
        2L) 
        stop("'x' is not a 2x2 numeric matrix")
    switch(match.arg(arg = method, choices = c("wald", "mle", 
        "midp")), wald = {
        if (any(x == 0)) x &lt;- x + 0.5
        lx &lt;- log(x)
        or &lt;- exp(lx[1, 1] + lx[2, 2] - lx[1, 2] - lx[2, 1])
        if (is.na(conf.level)) {
            res &lt;- or
        } else {
            sigma2lor &lt;- sum(1/x)
            ci &lt;- or * exp(c(1, -1) * qnorm((1 - conf.level)/2) * 
                sqrt(sigma2lor))
            res &lt;- c(`odds ratio` = or, lwr.ci = ci[1], upr.ci = ci[2])
        }
    }, mle = {
        if (is.na(conf.level)) {
            res &lt;- unname(fisher.test(x, conf.int = FALSE)$estimate)
        } else {
            res &lt;- fisher.test(x, conf.level = conf.level)
            res &lt;- c(res$estimate, lwr.ci = res$conf.int[1], 
                upr.ci = res$conf.int[2])
        }
    }, midp = {
        a1 &lt;- x[1, 1]
        a0 &lt;- x[1, 2]
        b1 &lt;- x[2, 1]
        b0 &lt;- x[2, 2]
        or &lt;- 1
        mue &lt;- function(a1, a0, b1, b0, or) {
            mm &lt;- matrix(c(a1, a0, b1, b0), 2, 2, byrow = TRUE)
            fisher.test(mm, or = or, alternative = "l")$p - fisher.test(x = x, 
                or = or, alternative = "g")$p
        }
        midp &lt;- function(a1, a0, b1, b0, or = 1) {
            mm &lt;- matrix(c(a1, a0, b1, b0), 2, 2, byrow = TRUE)
            lteqtoa1 &lt;- fisher.test(mm, or = or, alternative = "l")$p.val
            gteqtoa1 &lt;- fisher.test(mm, or = or, alternative = "g")$p.val
            0.5 * (lteqtoa1 - gteqtoa1 + 1)
        }
        EST &lt;- uniroot(function(or) {
            mue(a1, a0, b1, b0, or)
        }, interval = interval)$root
        if (is.na(conf.level)) {
            res &lt;- EST
        } else {
            alpha &lt;- 1 - conf.level
            LCL &lt;- uniroot(function(or) {
                1 - midp(a1, a0, b1, b0, or) - alpha/2
            }, interval = interval)$root
            UCL &lt;- 1/uniroot(function(or) {
                midp(a1, a0, b1, b0, or = 1/or) - alpha/2
            }, interval = interval)$root
            res &lt;- c(`odds ratio` = EST, lwr.ci = LCL, upr.ci = UCL)
        }
    })
    return(res)
}
&lt;bytecode: 0x1406baff8&gt;
&lt;environment: namespace:DescTools&gt;</code></pre>
</div>
</div>
</section>
<section id="unnameを使う" class="level2" data-number="7.10">
<h2 data-number="7.10" class="anchored" data-anchor-id="unnameを使う"><span class="header-section-number">7.10</span> unnameを使う</h2>
<p>Cramer’s Vを<code>chisq.test()</code>の結果を利用して作成する． その際，<code>unname()</code>によってカイ2乗統計量の名前をとる．</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a>occupationalStatus</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      destination
origin   1   2   3   4   5   6   7   8
     1  50  19  26   8   7  11   6   2
     2  16  40  34  18  11  20   8   3
     3  12  35  65  66  35  88  23  21
     4  11  20  58 110  40 183  64  32
     5   2   8  12  23  25  46  28  12
     6  12  28 102 162  90 554 230 177
     7   0   6  19  40  21 158 143  71
     8   0   3  14  32  15 126  91 106</code></pre>
</div>
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(occupationalStatus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in chisq.test(occupationalStatus): Chi-squared approximation may be
incorrect</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  occupationalStatus
X-squared = 1416, df = 49, p-value &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a>X2 <span class="ot">&lt;-</span> <span class="fu">chisq.test</span>(occupationalStatus)<span class="sc">$</span>statistic <span class="sc">|&gt;</span> <span class="fu">unname</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in chisq.test(occupationalStatus): Chi-squared approximation may be
incorrect</code></pre>
</div>
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a>X2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1416.04</code></pre>
</div>
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a>my_CramerV <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(X2<span class="sc">/</span><span class="fu">min</span>(<span class="fu">dim</span>(occupationalStatus)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(occupationalStatus))</span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a>my_CramerV</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2404799</code></pre>
</div>
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a>DescTools<span class="sc">::</span><span class="fu">CramerV</span>(occupationalStatus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2404799</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./quarto.html" class="pagination-link" aria-label="Quarto">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Quarto</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link" aria-label="参考文献">
        <span class="nav-page-text">参考文献</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>